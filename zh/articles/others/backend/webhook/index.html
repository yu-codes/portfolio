<!doctype html><html lang=zh class=html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Webhook å…¨é¢è§£æï¼šåŸç†ã€å¯¦ä½œã€å®‰å…¨èˆ‡ LINE Bot å¯¦ä¾‹ - Yu's Portfolio & Learning Hub</title><meta name=description content="Webhook æ˜¯ç•¶ä»£ç³»çµ±æ•´åˆèˆ‡è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ä¸­çš„é‡è¦å·¥å…·ã€‚ç„¡è«–æ˜¯ GitHub Actionsã€Stripe é€šçŸ¥ï¼Œæˆ–æ˜¯èŠå¤©æ©Ÿå™¨äººå¦‚ LINE Botï¼ŒWebhook å¹¾ä¹ç„¡æ‰€ä¸åœ¨ã€‚
æœ¬æ–‡å°‡è©³è§£ Webhook çš„å·¥ä½œåŸç†ã€å¯¦ä½œæ–¹å¼ã€å®‰å…¨å»ºè­°ï¼Œä¸¦é€é LINE Bot é€²è¡Œå®Œæ•´ç¯„ä¾‹å±•ç¤ºï¼Œé©åˆå·¥ç¨‹å¯¦ä½œèˆ‡é¢è©¦æº–å‚™ã€‚
ğŸŒ ä»€éº¼æ˜¯ Webhookï¼Ÿ Webhook æ˜¯ä¸€ç¨® ç”±ä¼ºæœå™¨ä¸»å‹•è§¸ç™¼çš„ HTTP å›å‘¼ï¼ˆcallbackï¼‰æ©Ÿåˆ¶ã€‚èˆ‡å‚³çµ± API ä¸åŒï¼ŒWebhook ä¸éœ€ä¸»å‹•è¼ªè©¢ï¼ˆpollingï¼‰ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šäº‹ä»¶ç™¼ç”Ÿæ™‚ï¼Œç”±ä¾†æºç³»çµ±è‡ªå‹•ç™¼é€è³‡æ–™çµ¦ç›®æ¨™ URLã€‚
âœ… æ ¸å¿ƒæ¦‚å¿µï¼š è³‡æ–™ç”±ä¾†æºç³»çµ±ä¸»å‹•æ¨é€ æ¥æ”¶ç«¯ç‚ºä¸€å€‹å¯æ¥æ”¶ POST è«‹æ±‚çš„ API Endpoint ä¸€æ—¦äº‹ä»¶ç™¼ç”Ÿï¼ˆå¦‚æ–°è¨Šæ¯ã€æ–°ä»˜æ¬¾ï¼‰ï¼Œå³è§¸ç™¼é€šçŸ¥ ğŸ” èˆ‡ API Polling çš„æ¯”è¼ƒ ç‰¹æ€§ Webhook Polling æ•ˆç‡ é«˜ï¼ˆäº‹ä»¶æ‰ç™¼é€ï¼‰ ä½ï¼ˆéœ€å®šæ™‚æŸ¥è©¢ï¼‰ å³æ™‚æ€§ é«˜ï¼ˆå¹¾ä¹å³æ™‚ï¼‰ ä½ï¼ˆä¾æŸ¥è©¢é »ç‡ï¼‰ ä¸»å‹•æ¬Š ä¾†æºç³»çµ± æ¥æ”¶ç«¯ç³»çµ± å¸¸è¦‹æ‡‰ç”¨ èŠå¤©é€šçŸ¥ã€é‡‘æµã€CI/CD æ‰¹æ¬¡ä»»å‹™ã€éæ™‚é–“æ•æ„ŸæŸ¥è©¢ ğŸ§  Webhook æµç¨‹åœ– \[ç”¨æˆ¶è§¸ç™¼äº‹ä»¶] â†“ \[ä¾†æºç³»çµ±ï¼ˆå¦‚ LINEï¼‰] â†“ ç™¼é€ HTTP POST è«‹æ±‚ \[ä½ çš„ Webhook Endpoint] â†“ è™•ç†è³‡æ–™ / é©—è­‰ / å›æ‡‰ \[ä¼ºæœå™¨å›å‚³ 200 OK] ğŸ” Webhook å®‰å…¨æ€§è¦é» Webhook ä¸¦éé›™æ–¹é©—è­‰çš„æ¨™æº–å”è­°ï¼Œå› æ­¤ä½ å¿…é ˆè‡ªè¡Œå¯¦ä½œå®‰å…¨ä¿è­·ï¼š
"><meta property="og:title" content="Webhook å…¨é¢è§£æï¼šåŸç†ã€å¯¦ä½œã€å®‰å…¨èˆ‡ LINE Bot å¯¦ä¾‹"><meta property="og:description" content="Webhook æ˜¯ç•¶ä»£ç³»çµ±æ•´åˆèˆ‡è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ä¸­çš„é‡è¦å·¥å…·ã€‚ç„¡è«–æ˜¯ GitHub Actionsã€Stripe é€šçŸ¥ï¼Œæˆ–æ˜¯èŠå¤©æ©Ÿå™¨äººå¦‚ LINE Botï¼ŒWebhook å¹¾ä¹ç„¡æ‰€ä¸åœ¨ã€‚
æœ¬æ–‡å°‡è©³è§£ Webhook çš„å·¥ä½œåŸç†ã€å¯¦ä½œæ–¹å¼ã€å®‰å…¨å»ºè­°ï¼Œä¸¦é€é LINE Bot é€²è¡Œå®Œæ•´ç¯„ä¾‹å±•ç¤ºï¼Œé©åˆå·¥ç¨‹å¯¦ä½œèˆ‡é¢è©¦æº–å‚™ã€‚
ğŸŒ ä»€éº¼æ˜¯ Webhookï¼Ÿ Webhook æ˜¯ä¸€ç¨® ç”±ä¼ºæœå™¨ä¸»å‹•è§¸ç™¼çš„ HTTP å›å‘¼ï¼ˆcallbackï¼‰æ©Ÿåˆ¶ã€‚èˆ‡å‚³çµ± API ä¸åŒï¼ŒWebhook ä¸éœ€ä¸»å‹•è¼ªè©¢ï¼ˆpollingï¼‰ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šäº‹ä»¶ç™¼ç”Ÿæ™‚ï¼Œç”±ä¾†æºç³»çµ±è‡ªå‹•ç™¼é€è³‡æ–™çµ¦ç›®æ¨™ URLã€‚
âœ… æ ¸å¿ƒæ¦‚å¿µï¼š è³‡æ–™ç”±ä¾†æºç³»çµ±ä¸»å‹•æ¨é€ æ¥æ”¶ç«¯ç‚ºä¸€å€‹å¯æ¥æ”¶ POST è«‹æ±‚çš„ API Endpoint ä¸€æ—¦äº‹ä»¶ç™¼ç”Ÿï¼ˆå¦‚æ–°è¨Šæ¯ã€æ–°ä»˜æ¬¾ï¼‰ï¼Œå³è§¸ç™¼é€šçŸ¥ ğŸ” èˆ‡ API Polling çš„æ¯”è¼ƒ ç‰¹æ€§ Webhook Polling æ•ˆç‡ é«˜ï¼ˆäº‹ä»¶æ‰ç™¼é€ï¼‰ ä½ï¼ˆéœ€å®šæ™‚æŸ¥è©¢ï¼‰ å³æ™‚æ€§ é«˜ï¼ˆå¹¾ä¹å³æ™‚ï¼‰ ä½ï¼ˆä¾æŸ¥è©¢é »ç‡ï¼‰ ä¸»å‹•æ¬Š ä¾†æºç³»çµ± æ¥æ”¶ç«¯ç³»çµ± å¸¸è¦‹æ‡‰ç”¨ èŠå¤©é€šçŸ¥ã€é‡‘æµã€CI/CD æ‰¹æ¬¡ä»»å‹™ã€éæ™‚é–“æ•æ„ŸæŸ¥è©¢ ğŸ§  Webhook æµç¨‹åœ– \[ç”¨æˆ¶è§¸ç™¼äº‹ä»¶] â†“ \[ä¾†æºç³»çµ±ï¼ˆå¦‚ LINEï¼‰] â†“ ç™¼é€ HTTP POST è«‹æ±‚ \[ä½ çš„ Webhook Endpoint] â†“ è™•ç†è³‡æ–™ / é©—è­‰ / å›æ‡‰ \[ä¼ºæœå™¨å›å‚³ 200 OK] ğŸ” Webhook å®‰å…¨æ€§è¦é» Webhook ä¸¦éé›™æ–¹é©—è­‰çš„æ¨™æº–å”è­°ï¼Œå› æ­¤ä½ å¿…é ˆè‡ªè¡Œå¯¦ä½œå®‰å…¨ä¿è­·ï¼š
"><meta property="og:url" content="https://yu-codes.github.io/portfolio/zh/articles/others/backend/webhook/"><link rel=canonical href=https://yu-codes.github.io/portfolio/zh/articles/others/backend/webhook/><link rel=stylesheet href=https://yu-codes.github.io/portfolio/css/main.css></head><body class=body><div class=container><aside class=sidebar><div class=sidebar-header><h1 class=name>Yu</h1><p class=tagline>Developer, dreamer, debugger.</p></div><nav class=sidebar-nav><a href=https://yu-codes.github.io/portfolio/zh/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
<span>é¦–é </span>
</a><a href=https://yu-codes.github.io/portfolio/zh/articles/ class="nav-item active"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5.0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5.0 014 19.5v-15A2.5 2.5.0 016.5 2z"/></svg>
<span>æ–‡ç« </span>
</a><a href=https://yu-codes.github.io/portfolio/zh/resume/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="11" x2="12" y2="17"/><line x1="9" y1="14" x2="15" y2="14"/></svg>
<span>å±¥æ­·</span>
</a><a href=https://yu-codes.github.io/portfolio/zh/projects/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="8" height="8"/><rect x="13" y="3" width="8" height="8"/><rect x="3" y="13" width="8" height="8"/><rect x="13" y="13" width="8" height="8"/></svg>
<span>å°ˆæ¡ˆ</span>
</a><a href=https://yu-codes.github.io/portfolio/zh/archives/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>æ­¸æª”</span></a></nav><div class=sidebar-footer><div class=controls><button class="control-btn theme-toggle" title=åˆ‡æ›ä¸»é¡Œï¼ˆæ·ºè‰²/æ·±è‰²ï¼‰ aria-label="Toggle theme">
<svg class="icon-sun" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M12 3a9 9 0 010 18" fill="currentColor" opacity=".9"/><path d="M12 3a9 9 0 000 18" fill="currentColor" opacity=".25"/></svg>
<svg class="icon-moon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M12 3a9 9 0 000 18" fill="currentColor" opacity=".9"/><path d="M12 3a9 9 0 010 18" fill="currentColor" opacity=".25"/></svg>
</button>
<button class="control-btn lang-toggle" title=åˆ‡æ›èªè¨€ aria-label="Toggle language">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3.0 014 10 15.3 15.3.0 01-4 10A15.3 15.3.0 018 12a15.3 15.3.0 014-10z"/></svg></button></div><div class=social-links><a href=https://github.com/yu-codes target=_blank rel="noopener noreferrer" class=social-link title=GitHub><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
</a><a href=mailto:dylan.jhou1120@gmail.com class=social-link title=Email><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></div></aside><div class=main-content><div class=topbar><div class=breadcrumb><a href=https://yu-codes.github.io/portfolio/zh/>é¦–é </a>
<span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/zh/articles/>æ–‡ç« </a>
<span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/zh/articles/others/>å…¶ä»–</a><span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/zh/articles/others/backend/>å¾Œç«¯</a><span class=separator>&#8250;</span>
<span>Webhook å…¨é¢è§£æï¼šåŸç†ã€å¯¦ä½œã€å®‰å…¨èˆ‡ LINE Bot å¯¦ä¾‹</span></div></div><main class=content-area><article class=article-content><header class=article-header><h1>Webhook å…¨é¢è§£æï¼šåŸç†ã€å¯¦ä½œã€å®‰å…¨èˆ‡ LINE Bot å¯¦ä¾‹</h1><div class=article-meta><span class=article-author><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
Yu-Han Jhou
</span><span class=article-updated><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
æœ€å¾Œæ›´æ–°: 2025-01-26</span></div></header><div class=article-body><p>Webhook æ˜¯ç•¶ä»£ç³»çµ±æ•´åˆèˆ‡è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ä¸­çš„é‡è¦å·¥å…·ã€‚ç„¡è«–æ˜¯ GitHub Actionsã€Stripe é€šçŸ¥ï¼Œæˆ–æ˜¯èŠå¤©æ©Ÿå™¨äººå¦‚ LINE Botï¼ŒWebhook å¹¾ä¹ç„¡æ‰€ä¸åœ¨ã€‚</p><blockquote><p>æœ¬æ–‡å°‡è©³è§£ Webhook çš„å·¥ä½œåŸç†ã€å¯¦ä½œæ–¹å¼ã€å®‰å…¨å»ºè­°ï¼Œä¸¦é€é LINE Bot é€²è¡Œå®Œæ•´ç¯„ä¾‹å±•ç¤ºï¼Œé©åˆå·¥ç¨‹å¯¦ä½œèˆ‡é¢è©¦æº–å‚™ã€‚</p></blockquote><hr><nav class=article-toc><span class=toc-title>ç›®éŒ„</span><nav id=TableOfContents><ul><li><a href=#-ä»€éº¼æ˜¯-webhook>ğŸŒ ä»€éº¼æ˜¯ Webhookï¼Ÿ</a><ul><li><a href=#-æ ¸å¿ƒæ¦‚å¿µ>âœ… æ ¸å¿ƒæ¦‚å¿µï¼š</a></li></ul></li><li><a href=#-èˆ‡-api-polling-çš„æ¯”è¼ƒ>ğŸ” èˆ‡ API Polling çš„æ¯”è¼ƒ</a></li><li><a href=#-webhook-æµç¨‹åœ–>ğŸ§  Webhook æµç¨‹åœ–</a></li><li><a href=#-webhook-å®‰å…¨æ€§è¦é»>ğŸ” Webhook å®‰å…¨æ€§è¦é»</a></li><li><a href=#-webhook-æ¥æ”¶ç«¯å¯¦ä½œfastapi-ç¯„ä¾‹>ğŸ›  Webhook æ¥æ”¶ç«¯å¯¦ä½œï¼ˆFastAPI ç¯„ä¾‹ï¼‰</a></li><li><a href=#-line-bot-webhook-å¯¦æˆ°æ•™å­¸>ğŸ’¬ LINE Bot Webhook å¯¦æˆ°æ•™å­¸</a><ul><li><a href=#1-line-bot-è¨­å®š>1. LINE Bot è¨­å®š</a></li><li><a href=#2-å®‰è£å¥—ä»¶>2. å®‰è£å¥—ä»¶</a></li><li><a href=#3-å»ºç«‹-webhook-æ¥æ”¶ç¨‹å¼>3. å»ºç«‹ webhook æ¥æ”¶ç¨‹å¼</a></li></ul></li><li><a href=#-å¦‚ä½•æ¸¬è©¦-webhook>ğŸ§ª å¦‚ä½•æ¸¬è©¦ Webhookï¼Ÿ</a></li><li><a href=#-é¢è©¦å¸¸å•-webhook-é¡Œç›®èˆ‡å»ºè­°å›ç­”>ğŸ’¼ é¢è©¦å¸¸å• Webhook é¡Œç›®èˆ‡å»ºè­°å›ç­”</a></li><li><a href=#-å»¶ä¼¸è³‡æºæ¨è–¦>ğŸ“˜ å»¶ä¼¸è³‡æºæ¨è–¦</a></li><li><a href=#-çµèª>âœ… çµèª</a></li></ul></nav></nav><h2 id=-ä»€éº¼æ˜¯-webhook>ğŸŒ ä»€éº¼æ˜¯ Webhookï¼Ÿ</h2><p>Webhook æ˜¯ä¸€ç¨® <strong>ç”±ä¼ºæœå™¨ä¸»å‹•è§¸ç™¼çš„ HTTP å›å‘¼ï¼ˆcallbackï¼‰æ©Ÿåˆ¶</strong>ã€‚èˆ‡å‚³çµ± API ä¸åŒï¼ŒWebhook <strong>ä¸éœ€ä¸»å‹•è¼ªè©¢ï¼ˆpollingï¼‰</strong>ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šäº‹ä»¶ç™¼ç”Ÿæ™‚ï¼Œç”±ä¾†æºç³»çµ±è‡ªå‹•ç™¼é€è³‡æ–™çµ¦ç›®æ¨™ URLã€‚</p><h3 id=-æ ¸å¿ƒæ¦‚å¿µ>âœ… æ ¸å¿ƒæ¦‚å¿µï¼š</h3><ul><li>è³‡æ–™ç”±<strong>ä¾†æºç³»çµ±ä¸»å‹•æ¨é€</strong></li><li>æ¥æ”¶ç«¯ç‚ºä¸€å€‹å¯æ¥æ”¶ POST è«‹æ±‚çš„ API Endpoint</li><li>ä¸€æ—¦äº‹ä»¶ç™¼ç”Ÿï¼ˆå¦‚æ–°è¨Šæ¯ã€æ–°ä»˜æ¬¾ï¼‰ï¼Œå³è§¸ç™¼é€šçŸ¥</li></ul><hr><h2 id=-èˆ‡-api-polling-çš„æ¯”è¼ƒ>ğŸ” èˆ‡ API Polling çš„æ¯”è¼ƒ</h2><table><thead><tr><th>ç‰¹æ€§</th><th>Webhook</th><th>Polling</th></tr></thead><tbody><tr><td>æ•ˆç‡</td><td>é«˜ï¼ˆäº‹ä»¶æ‰ç™¼é€ï¼‰</td><td>ä½ï¼ˆéœ€å®šæ™‚æŸ¥è©¢ï¼‰</td></tr><tr><td>å³æ™‚æ€§</td><td>é«˜ï¼ˆå¹¾ä¹å³æ™‚ï¼‰</td><td>ä½ï¼ˆä¾æŸ¥è©¢é »ç‡ï¼‰</td></tr><tr><td>ä¸»å‹•æ¬Š</td><td>ä¾†æºç³»çµ±</td><td>æ¥æ”¶ç«¯ç³»çµ±</td></tr><tr><td>å¸¸è¦‹æ‡‰ç”¨</td><td>èŠå¤©é€šçŸ¥ã€é‡‘æµã€CI/CD</td><td>æ‰¹æ¬¡ä»»å‹™ã€éæ™‚é–“æ•æ„ŸæŸ¥è©¢</td></tr></tbody></table><hr><h2 id=-webhook-æµç¨‹åœ–>ğŸ§  Webhook æµç¨‹åœ–</h2><pre tabindex=0><code>
\[ç”¨æˆ¶è§¸ç™¼äº‹ä»¶]
â†“
\[ä¾†æºç³»çµ±ï¼ˆå¦‚ LINEï¼‰]
â†“   ç™¼é€ HTTP POST è«‹æ±‚
\[ä½ çš„ Webhook Endpoint]
â†“   è™•ç†è³‡æ–™ / é©—è­‰ / å›æ‡‰
\[ä¼ºæœå™¨å›å‚³ 200 OK]
</code></pre><hr><h2 id=-webhook-å®‰å…¨æ€§è¦é»>ğŸ” Webhook å®‰å…¨æ€§è¦é»</h2><p>Webhook ä¸¦éé›™æ–¹é©—è­‰çš„æ¨™æº–å”è­°ï¼Œå› æ­¤ä½ <strong>å¿…é ˆè‡ªè¡Œå¯¦ä½œå®‰å…¨ä¿è­·</strong>ï¼š</p><ul><li>âœ… <strong>é©—è­‰ä¾†æºï¼ˆsignatureï¼‰</strong>ï¼šå¦‚ HMACã€Tokenã€Header é©—è­‰</li><li>âœ… <strong>åƒ…å…è¨± POST + æ­£ç¢º Content-Type</strong></li><li>âœ… <strong>è¨­å®š White-list IP / Hostname</strong></li><li>âœ… <strong>è¨­é™è«‹æ±‚é »ç‡ï¼ˆRate Limitï¼‰</strong></li><li>âœ… <strong>è¨˜éŒ„è«‹æ±‚è¨˜éŒ„ / é˜²é‡æ”¾æ”»æ“Š</strong></li></ul><hr><h2 id=-webhook-æ¥æ”¶ç«¯å¯¦ä½œfastapi-ç¯„ä¾‹>ğŸ›  Webhook æ¥æ”¶ç«¯å¯¦ä½œï¼ˆFastAPI ç¯„ä¾‹ï¼‰</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install fastapi uvicorn
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> fastapi <span style=color:#f92672>import</span> FastAPI, Request
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> FastAPI()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.post</span>(<span style=color:#e6db74>&#34;/webhook&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>webhook</span>(request: Request):
</span></span><span style=display:flex><span>    body <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> request<span style=color:#f92672>.</span>json()
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;æ¥æ”¶åˆ°çš„è³‡æ–™ï¼š&#34;</span>, body)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {<span style=color:#e6db74>&#34;status&#34;</span>: <span style=color:#e6db74>&#34;ok&#34;</span>}
</span></span></code></pre></div><p>å•Ÿå‹•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uvicorn main:app --host 0.0.0.0 --port <span style=color:#ae81ff>8000</span>
</span></span></code></pre></div><blockquote><p>é–‹ç™¼æ™‚å¯ä½¿ç”¨ <a href=https://ngrok.com/>ngrok</a> æš´éœ²æœ¬åœ°æœå‹™çµ¦ä¾†æºç³»çµ±ï¼š</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ngrok http <span style=color:#ae81ff>8000</span>
</span></span></code></pre></div><hr><h2 id=-line-bot-webhook-å¯¦æˆ°æ•™å­¸>ğŸ’¬ LINE Bot Webhook å¯¦æˆ°æ•™å­¸</h2><h3 id=1-line-bot-è¨­å®š>1. LINE Bot è¨­å®š</h3><ul><li>é€²å…¥ <a href=https://developers.line.biz/>LINE Developers Console</a></li><li>å»ºç«‹ Provider â†’ Channel</li><li>è¨­å®š Webhook URL ç‚º <code>https://your-domain/webhook</code></li><li>å•Ÿç”¨ Webhook ä¸¦é–‹å•Ÿè¨Šæ¯å›æ‡‰åŠŸèƒ½</li></ul><h3 id=2-å®‰è£å¥—ä»¶>2. å®‰è£å¥—ä»¶</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install line-bot-sdk fastapi
</span></span></code></pre></div><h3 id=3-å»ºç«‹-webhook-æ¥æ”¶ç¨‹å¼>3. å»ºç«‹ webhook æ¥æ”¶ç¨‹å¼</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> fastapi <span style=color:#f92672>import</span> Request, FastAPI, Header
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> linebot <span style=color:#f92672>import</span> WebhookHandler
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> linebot.models <span style=color:#f92672>import</span> MessageEvent, TextMessage, TextSendMessage
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> FastAPI()
</span></span><span style=display:flex><span>handler <span style=color:#f92672>=</span> WebhookHandler(<span style=color:#e6db74>&#34;ä½ çš„Channel Secret&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.post</span>(<span style=color:#e6db74>&#34;/webhook&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>callback</span>(request: Request, x_line_signature: str <span style=color:#f92672>=</span> Header(<span style=color:#f92672>...</span>)):
</span></span><span style=display:flex><span>    body <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> request<span style=color:#f92672>.</span>body()
</span></span><span style=display:flex><span>    handler<span style=color:#f92672>.</span>handle(body<span style=color:#f92672>.</span>decode(), x_line_signature)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;OK&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@handler.add</span>(MessageEvent, message<span style=color:#f92672>=</span>TextMessage)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>handle_message</span>(event):
</span></span><span style=display:flex><span>    reply_token <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>reply_token
</span></span><span style=display:flex><span>    message_text <span style=color:#f92672>=</span> event<span style=color:#f92672>.</span>message<span style=color:#f92672>.</span>text
</span></span><span style=display:flex><span>    event<span style=color:#f92672>.</span>source<span style=color:#f92672>.</span>user_id  <span style=color:#75715e># å¯å–å¾—ä½¿ç”¨è€… ID</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    line_bot_api<span style=color:#f92672>.</span>reply_message(
</span></span><span style=display:flex><span>        reply_token,
</span></span><span style=display:flex><span>        TextSendMessage(text<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ä½ èªªçš„æ˜¯ï¼š</span><span style=color:#e6db74>{</span>message_text<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    )
</span></span></code></pre></div><hr><h2 id=-å¦‚ä½•æ¸¬è©¦-webhook>ğŸ§ª å¦‚ä½•æ¸¬è©¦ Webhookï¼Ÿ</h2><ul><li>ä½¿ç”¨ <code>ngrok</code> æˆ– <code>Cloudflare Tunnel</code> æš´éœ²æ¸¬è©¦ä¼ºæœå™¨</li><li>ç”¨ Postman æˆ– curl æ¨¡æ“¬ POST è«‹æ±‚</li><li>æŸ¥çœ‹ logs æˆ–ä¸²æ¥ Slack / Discord æ¸¬è©¦å›å ±</li></ul><hr><h2 id=-é¢è©¦å¸¸å•-webhook-é¡Œç›®èˆ‡å»ºè­°å›ç­”>ğŸ’¼ é¢è©¦å¸¸å• Webhook é¡Œç›®èˆ‡å»ºè­°å›ç­”</h2><ol><li><p><strong>Webhook èˆ‡ REST API çš„å·®ç•°ï¼Ÿ</strong></p><blockquote><p>REST API æ˜¯æˆ‘æ–¹ä¸»å‹•æŸ¥è©¢ï¼ŒWebhook æ˜¯å°æ–¹ä¸»å‹•é€šçŸ¥ã€‚</p></blockquote></li><li><p><strong>å¦‚ä½•ä¿è­· Webhook å®‰å…¨ï¼Ÿ</strong></p><blockquote><p>ä½¿ç”¨ç°½ç« é©—è­‰ï¼ˆHMACï¼‰ã€ç™½åå–®ã€Token headerã€é »ç‡æ§åˆ¶ç­‰ã€‚</p></blockquote></li><li><p><strong>Webhook æœ‰å¤±æ•—æ€éº¼è¾¦ï¼Ÿ</strong></p><blockquote><p>å¯å›å‚³é 2xx ç‹€æ…‹ï¼Œè§¸ç™¼å°æ–¹é‡è©¦æ©Ÿåˆ¶ï¼›ä¹Ÿå¯å»ºç«‹å¤±æ•—é‡é€ queueã€‚</p></blockquote></li><li><p><strong>LINE Bot ç‚ºä½•æ¡ç”¨ Webhook è€Œé pollingï¼Ÿ</strong></p><blockquote><p>æ›´å³æ™‚ã€æ›´ç¯€çœè³‡æºï¼Œä¸¦èƒ½æ¸›å°‘ delay èˆ‡ server costã€‚</p></blockquote></li></ol><hr><h2 id=-å»¶ä¼¸è³‡æºæ¨è–¦>ğŸ“˜ å»¶ä¼¸è³‡æºæ¨è–¦</h2><ul><li><a href=https://developers.line.biz/en/docs/messaging-api/>LINE å®˜æ–¹ Webhook æ–‡ä»¶</a></li><li><a href=https://stripe.com/docs/webhooks>Stripe Webhook å®‰å…¨æ€§å»ºè­°</a></li><li><a href=https://ngrok.com/>Ngrok</a></li><li><a href=https://webhook.site/>Webhook.site æ¸¬è©¦å·¥å…·</a></li></ul><hr><h2 id=-çµèª>âœ… çµèª</h2><p>Webhook æ˜¯ä¸²æ¥ç¾ä»£æœå‹™çš„æ ¸å¿ƒæ©Ÿåˆ¶ï¼Œå¾ LINE Botã€GitHub Actions åˆ° Stripe ä»˜æ¬¾é€šçŸ¥ï¼Œå®ƒè®“è³‡è¨Šèƒ½ã€Œå³æ™‚ä¸»å‹•åœ°ã€æ¨é€çµ¦ä½ çš„æ‡‰ç”¨ã€‚æŒæ¡æœ¬æ–‡å…§å®¹ï¼Œä½ å°‡èƒ½è¨­è¨ˆå‡ºç©©å®šä¸”å®‰å…¨çš„ Webhook ç³»çµ±ï¼Œä¹Ÿèƒ½åœ¨é¢è©¦ä¸­å±•ç¾å¯¦å‹™ç¶“é©—èˆ‡ç†è§£æ·±åº¦ã€‚</p></div><div class=article-tags><div class=tags><span class=tag>webhook</span></div></div><footer class=article-footer><a href=/portfolio/zh/articles/others/backend/ class=back-link>â† è¿”å› å¾Œç«¯</a></footer></article></main><footer class=site-footer><p>&copy; 2026 YuHan Jhou. All rights reserved.</p></footer></div></div><script src=https://yu-codes.github.io/portfolio/js/theme.js defer></script><script src=https://yu-codes.github.io/portfolio/js/roadmap.js defer></script><script src=https://yu-codes.github.io/portfolio/js/parallax.js defer></script><script src=https://yu-codes.github.io/portfolio/js/page-transition.js defer></script></body></html>