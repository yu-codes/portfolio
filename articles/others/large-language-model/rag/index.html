<!doctype html><html lang=en class=html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>ä¸€æ–‡æŒæ¡ RAGï¼ˆRetrieval-Augmented Generationï¼‰ï¼šæ¶æ§‹ã€æ‡‰ç”¨èˆ‡å¯¦ä½œè§£æ - Yu's Portfolio & Learning Hub</title><meta name=description content='ç•¶æˆ‘å€‘ä½¿ç”¨å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰æ™‚ï¼Œå¸¸é‡åˆ°çŸ¥è­˜æœ‰é™ã€äº‹å¯¦éŒ¯èª¤èˆ‡å¹»è¦ºï¼ˆhallucinationï¼‰ç­‰å•é¡Œã€‚RAGï¼ˆRetrieval-Augmented Generationï¼‰ æ­£æ˜¯ç‚ºäº†è§£æ±ºé€™äº›å•é¡Œè€Œå‡ºç¾çš„æŠ€è¡“æ¶æ§‹ã€‚
æœ¬æ–‡å°‡æ·±å…¥è§£æ RAG çš„è¨­è¨ˆç†å¿µã€é‹ä½œæµç¨‹ã€å¯¦ä½œæ–¹å¼èˆ‡å¸¸è¦‹æ‡‰ç”¨ï¼Œä¸¦æ­é… LangChain å¯¦ä¾‹æ¼”ç·´ï¼Œè®“ä½ ä¸å†éœ€è¦æŸ¥æ‰¾å…¶ä»–æ•™å­¸è³‡æºã€‚
ğŸ“š ä»€éº¼æ˜¯ RAGï¼Ÿ RAGï¼Œå…¨å Retrieval-Augmented Generationï¼Œæ˜¯ä¸€ç¨®å°‡è³‡æ–™æª¢ç´¢ï¼ˆRetrievalï¼‰èˆ‡èªè¨€æ¨¡å‹ç”Ÿæˆï¼ˆGenerationï¼‰çµåˆçš„æ¶æ§‹ã€‚å®ƒèƒ½å¤ è®“ LLM åœ¨å›ç­”å•é¡Œå‰ï¼Œå…ˆå¾å¤–éƒ¨è³‡æ–™åº«æŸ¥è©¢ç›¸é—œå…§å®¹ï¼Œå†ä»¥æŸ¥å¾—è³‡æ–™ç‚ºåŸºç¤ç”Ÿæˆæ›´æº–ç¢ºçš„å›æ‡‰ã€‚
ğŸ” æ ¸å¿ƒæµç¨‹ï¼šRAG çš„å››å€‹éšæ®µ ç”¨æˆ¶è¼¸å…¥æŸ¥è©¢ å‘é‡åŒ–æŸ¥è©¢ï¼Œæœå°‹ç›¸é—œæ–‡ä»¶ å°‡æ–‡ä»¶èˆ‡åŸå§‹æŸ¥è©¢ä¸€ä½µé¤µå…¥ LLM LLM æ ¹æ“šä¸Šä¸‹æ–‡è³‡æ–™ç”Ÿæˆå›ç­” é€™å€‹éç¨‹è®“ LLM æ‹¿åˆ°æœ€æ–°çš„çŸ¥è­˜èˆ‡å°ˆå±¬ä¸Šä¸‹æ–‡ï¼Œæå‡å›ç­”æ­£ç¢ºæ€§ã€‚
ğŸ§  RAG çš„å„ªå‹¢èˆ‡é™åˆ¶ âœ… å„ªé» é¿å…å¹»è¦ºï¼ˆhallucinationï¼‰ å¯æ“´å……ä¼æ¥­å…§éƒ¨çŸ¥è­˜ çŸ¥è­˜åº«å¯å³æ™‚æ›´æ–°ï¼Œç„¡éœ€é‡è¨“æ¨¡å‹ âš ï¸ é™åˆ¶ æª¢ç´¢å“è³ªå½±éŸ¿ç”Ÿæˆå“è³ª è¼ƒé«˜å»¶é²ï¼ˆéœ€æª¢ç´¢ + æ¨ç†ï¼‰ æ–‡ä»¶åˆ†æ®µç­–ç•¥èˆ‡å‘é‡åŒ–å“è³ªé—œéµ ğŸ§± æ¶æ§‹åœ–ï¼ˆæ¦‚å¿µï¼‰ \[User Query] â†“ \[Embedding Model] â†’ \[Vector DB] â†’ \[Top-K Documents] â†“ â†˜ â†“ \[Retriever] â†“ â†“ \[Prompt Template + Documents] â†’ \[LLM (e.g. GPT-4)] â†“ \[Generated Answer] ğŸ”¨ RAG ç³»çµ±å¯¦ä½œï¼ˆç”¨ LangChain + FAISSï¼‰ å®‰è£å¿…è¦å¥—ä»¶ pip install langchain openai faiss-cpu æ­¥é©Ÿä¸€ï¼šæ–‡ä»¶è®€å–èˆ‡åˆ†æ®µ from langchain.document_loaders import TextLoader from langchain.text_splitter import RecursiveCharacterTextSplitter loader = TextLoader("docs/policy.txt", encoding="utf-8") docs = loader.load() splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=100) chunks = splitter.split_documents(docs) æ­¥é©ŸäºŒï¼šå»ºç«‹å‘é‡ç´¢å¼•ï¼ˆä»¥ FAISS ç‚ºä¾‹ï¼‰ from langchain.embeddings import OpenAIEmbeddings from langchain.vectorstores import FAISS embeddings = OpenAIEmbeddings() vectorstore = FAISS.from_documents(chunks, embeddings) retriever = vectorstore.as_retriever() æ­¥é©Ÿä¸‰ï¼šçµåˆæª¢ç´¢èˆ‡ç”Ÿæˆ from langchain.chat_models import ChatOpenAI from langchain.chains import RetrievalQA llm = ChatOpenAI(temperature=0.2) rag_chain = RetrievalQA.from_chain_type( llm=llm, retriever=retriever, chain_type="stuff" ) response = rag_chain.run("è©²æ”¿ç­–ä¸­æœ‰æåˆ°è³‡æ–™åˆªé™¤çš„æ¢æ¬¾å—ï¼Ÿ") print(response) ğŸ“‚ æ–‡ä»¶åˆ†æ®µç­–ç•¥ï¼šchunk size çš„é¸æ“‡åŸå‰‡ chunk_size chunk_overlap é©ç”¨å ´æ™¯ 200~500 50~100 ä¸€èˆ¬æ–‡å­—è³‡æ–™ 800+ 150~200 æŠ€è¡“æ–‡ä»¶ / æ³•å¾‹åˆç´„ éå° å¤ªç¢ï¼Œä¸å…·èªæ„ éå¤§ åƒ…éƒ¨åˆ†è¢«æª¢ç´¢ï¼Œä¸å®Œæ•´ ğŸ” å¸¸è¦‹å‘é‡è³‡æ–™åº«é¸é … åç¨± ç‰¹æ€§ FAISS è¼•é‡ï¼Œé–‹æºï¼Œé©åˆæœ¬æ©Ÿå¯¦é©— Chroma ç°¡å–®å¥½ç”¨ï¼ŒåŸç”Ÿæ”¯æ´ LangChain Weaviate é›²ç«¯æ”¯æ´å¼·ï¼Œæ”¯æ´ GraphQL Pinecone é›²ç«¯æœå‹™ç©©å®šï¼Œå½ˆæ€§ä½³ ğŸ§  å»¶ä¼¸æ‡‰ç”¨å ´æ™¯ æ‡‰ç”¨é¡å‹ èªªæ˜ ChatPDF ä½¿ç”¨è€…å¯èˆ‡ PDF æ–‡ä»¶å°è©± æ³•è¦åŠ©æ‰‹ è¼¸å…¥å•é¡Œï¼Œè‡ªæ³•å¾‹æ–‡ä»¶ä¸­æ‰¾å‡ºæ¢æ¬¾ä¸¦è§£é‡‹ FAQ å•ç­”ç³»çµ± åŸºæ–¼çŸ¥è­˜åº«å»ºç«‹è‡ªå‹•å®¢æœ æŠ€è¡“æ”¯æ´åŠ©æ‰‹ å¾å…§éƒ¨æ–‡ä»¶å›ç­”å·¥ç¨‹å•é¡Œ ğŸ§ª é¢è©¦å¸¸è¦‹å•é¡Œèˆ‡æ‡‰å°å»ºè­° RAG èˆ‡ Fine-tuning æœ‰ä½•å·®ç•°ï¼Ÿ
'><meta property="og:title" content="ä¸€æ–‡æŒæ¡ RAGï¼ˆRetrieval-Augmented Generationï¼‰ï¼šæ¶æ§‹ã€æ‡‰ç”¨èˆ‡å¯¦ä½œè§£æ"><meta property="og:description" content='ç•¶æˆ‘å€‘ä½¿ç”¨å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰æ™‚ï¼Œå¸¸é‡åˆ°çŸ¥è­˜æœ‰é™ã€äº‹å¯¦éŒ¯èª¤èˆ‡å¹»è¦ºï¼ˆhallucinationï¼‰ç­‰å•é¡Œã€‚RAGï¼ˆRetrieval-Augmented Generationï¼‰ æ­£æ˜¯ç‚ºäº†è§£æ±ºé€™äº›å•é¡Œè€Œå‡ºç¾çš„æŠ€è¡“æ¶æ§‹ã€‚
æœ¬æ–‡å°‡æ·±å…¥è§£æ RAG çš„è¨­è¨ˆç†å¿µã€é‹ä½œæµç¨‹ã€å¯¦ä½œæ–¹å¼èˆ‡å¸¸è¦‹æ‡‰ç”¨ï¼Œä¸¦æ­é… LangChain å¯¦ä¾‹æ¼”ç·´ï¼Œè®“ä½ ä¸å†éœ€è¦æŸ¥æ‰¾å…¶ä»–æ•™å­¸è³‡æºã€‚
ğŸ“š ä»€éº¼æ˜¯ RAGï¼Ÿ RAGï¼Œå…¨å Retrieval-Augmented Generationï¼Œæ˜¯ä¸€ç¨®å°‡è³‡æ–™æª¢ç´¢ï¼ˆRetrievalï¼‰èˆ‡èªè¨€æ¨¡å‹ç”Ÿæˆï¼ˆGenerationï¼‰çµåˆçš„æ¶æ§‹ã€‚å®ƒèƒ½å¤ è®“ LLM åœ¨å›ç­”å•é¡Œå‰ï¼Œå…ˆå¾å¤–éƒ¨è³‡æ–™åº«æŸ¥è©¢ç›¸é—œå…§å®¹ï¼Œå†ä»¥æŸ¥å¾—è³‡æ–™ç‚ºåŸºç¤ç”Ÿæˆæ›´æº–ç¢ºçš„å›æ‡‰ã€‚
ğŸ” æ ¸å¿ƒæµç¨‹ï¼šRAG çš„å››å€‹éšæ®µ ç”¨æˆ¶è¼¸å…¥æŸ¥è©¢ å‘é‡åŒ–æŸ¥è©¢ï¼Œæœå°‹ç›¸é—œæ–‡ä»¶ å°‡æ–‡ä»¶èˆ‡åŸå§‹æŸ¥è©¢ä¸€ä½µé¤µå…¥ LLM LLM æ ¹æ“šä¸Šä¸‹æ–‡è³‡æ–™ç”Ÿæˆå›ç­” é€™å€‹éç¨‹è®“ LLM æ‹¿åˆ°æœ€æ–°çš„çŸ¥è­˜èˆ‡å°ˆå±¬ä¸Šä¸‹æ–‡ï¼Œæå‡å›ç­”æ­£ç¢ºæ€§ã€‚
ğŸ§  RAG çš„å„ªå‹¢èˆ‡é™åˆ¶ âœ… å„ªé» é¿å…å¹»è¦ºï¼ˆhallucinationï¼‰ å¯æ“´å……ä¼æ¥­å…§éƒ¨çŸ¥è­˜ çŸ¥è­˜åº«å¯å³æ™‚æ›´æ–°ï¼Œç„¡éœ€é‡è¨“æ¨¡å‹ âš ï¸ é™åˆ¶ æª¢ç´¢å“è³ªå½±éŸ¿ç”Ÿæˆå“è³ª è¼ƒé«˜å»¶é²ï¼ˆéœ€æª¢ç´¢ + æ¨ç†ï¼‰ æ–‡ä»¶åˆ†æ®µç­–ç•¥èˆ‡å‘é‡åŒ–å“è³ªé—œéµ ğŸ§± æ¶æ§‹åœ–ï¼ˆæ¦‚å¿µï¼‰ \[User Query] â†“ \[Embedding Model] â†’ \[Vector DB] â†’ \[Top-K Documents] â†“ â†˜ â†“ \[Retriever] â†“ â†“ \[Prompt Template + Documents] â†’ \[LLM (e.g. GPT-4)] â†“ \[Generated Answer] ğŸ”¨ RAG ç³»çµ±å¯¦ä½œï¼ˆç”¨ LangChain + FAISSï¼‰ å®‰è£å¿…è¦å¥—ä»¶ pip install langchain openai faiss-cpu æ­¥é©Ÿä¸€ï¼šæ–‡ä»¶è®€å–èˆ‡åˆ†æ®µ from langchain.document_loaders import TextLoader from langchain.text_splitter import RecursiveCharacterTextSplitter loader = TextLoader("docs/policy.txt", encoding="utf-8") docs = loader.load() splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=100) chunks = splitter.split_documents(docs) æ­¥é©ŸäºŒï¼šå»ºç«‹å‘é‡ç´¢å¼•ï¼ˆä»¥ FAISS ç‚ºä¾‹ï¼‰ from langchain.embeddings import OpenAIEmbeddings from langchain.vectorstores import FAISS embeddings = OpenAIEmbeddings() vectorstore = FAISS.from_documents(chunks, embeddings) retriever = vectorstore.as_retriever() æ­¥é©Ÿä¸‰ï¼šçµåˆæª¢ç´¢èˆ‡ç”Ÿæˆ from langchain.chat_models import ChatOpenAI from langchain.chains import RetrievalQA llm = ChatOpenAI(temperature=0.2) rag_chain = RetrievalQA.from_chain_type( llm=llm, retriever=retriever, chain_type="stuff" ) response = rag_chain.run("è©²æ”¿ç­–ä¸­æœ‰æåˆ°è³‡æ–™åˆªé™¤çš„æ¢æ¬¾å—ï¼Ÿ") print(response) ğŸ“‚ æ–‡ä»¶åˆ†æ®µç­–ç•¥ï¼šchunk size çš„é¸æ“‡åŸå‰‡ chunk_size chunk_overlap é©ç”¨å ´æ™¯ 200~500 50~100 ä¸€èˆ¬æ–‡å­—è³‡æ–™ 800+ 150~200 æŠ€è¡“æ–‡ä»¶ / æ³•å¾‹åˆç´„ éå° å¤ªç¢ï¼Œä¸å…·èªæ„ éå¤§ åƒ…éƒ¨åˆ†è¢«æª¢ç´¢ï¼Œä¸å®Œæ•´ ğŸ” å¸¸è¦‹å‘é‡è³‡æ–™åº«é¸é … åç¨± ç‰¹æ€§ FAISS è¼•é‡ï¼Œé–‹æºï¼Œé©åˆæœ¬æ©Ÿå¯¦é©— Chroma ç°¡å–®å¥½ç”¨ï¼ŒåŸç”Ÿæ”¯æ´ LangChain Weaviate é›²ç«¯æ”¯æ´å¼·ï¼Œæ”¯æ´ GraphQL Pinecone é›²ç«¯æœå‹™ç©©å®šï¼Œå½ˆæ€§ä½³ ğŸ§  å»¶ä¼¸æ‡‰ç”¨å ´æ™¯ æ‡‰ç”¨é¡å‹ èªªæ˜ ChatPDF ä½¿ç”¨è€…å¯èˆ‡ PDF æ–‡ä»¶å°è©± æ³•è¦åŠ©æ‰‹ è¼¸å…¥å•é¡Œï¼Œè‡ªæ³•å¾‹æ–‡ä»¶ä¸­æ‰¾å‡ºæ¢æ¬¾ä¸¦è§£é‡‹ FAQ å•ç­”ç³»çµ± åŸºæ–¼çŸ¥è­˜åº«å»ºç«‹è‡ªå‹•å®¢æœ æŠ€è¡“æ”¯æ´åŠ©æ‰‹ å¾å…§éƒ¨æ–‡ä»¶å›ç­”å·¥ç¨‹å•é¡Œ ğŸ§ª é¢è©¦å¸¸è¦‹å•é¡Œèˆ‡æ‡‰å°å»ºè­° RAG èˆ‡ Fine-tuning æœ‰ä½•å·®ç•°ï¼Ÿ
'><meta property="og:url" content="https://yu-codes.github.io/portfolio/articles/others/large-language-model/rag/"><link rel=canonical href=https://yu-codes.github.io/portfolio/articles/others/large-language-model/rag/><link rel=stylesheet href=https://yu-codes.github.io/portfolio/css/main.css></head><body class=body><div class=container><aside class=sidebar><div class=sidebar-header><h1 class=name>Yu</h1><p class=tagline>Developer, dreamer, debugger.</p></div><nav class=sidebar-nav><a href=https://yu-codes.github.io/portfolio/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
<span>HOME</span>
</a><a href=https://yu-codes.github.io/portfolio/articles/ class="nav-item active"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5.0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5.0 014 19.5v-15A2.5 2.5.0 016.5 2z"/></svg>
<span>ARTICLES</span>
</a><a href=https://yu-codes.github.io/portfolio/resume/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="11" x2="12" y2="17"/><line x1="9" y1="14" x2="15" y2="14"/></svg>
<span>RESUME</span>
</a><a href=https://yu-codes.github.io/portfolio/projects/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="8" height="8"/><rect x="13" y="3" width="8" height="8"/><rect x="3" y="13" width="8" height="8"/><rect x="13" y="13" width="8" height="8"/></svg>
<span>PROJECTS</span>
</a><a href=https://yu-codes.github.io/portfolio/archives/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>ARCHIVES</span></a></nav><div class=sidebar-footer><div class=controls><button class="control-btn theme-toggle" title="Toggle theme (light/dark)" aria-label="Toggle theme">
<svg class="icon-sun" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M12 3a9 9 0 010 18" fill="currentColor" opacity=".9"/><path d="M12 3a9 9 0 000 18" fill="currentColor" opacity=".25"/></svg>
<svg class="icon-moon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M12 3a9 9 0 000 18" fill="currentColor" opacity=".9"/><path d="M12 3a9 9 0 010 18" fill="currentColor" opacity=".25"/></svg>
</button>
<button class="control-btn lang-toggle" title="Toggle language" aria-label="Toggle language">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3.0 014 10 15.3 15.3.0 01-4 10A15.3 15.3.0 018 12a15.3 15.3.0 014-10z"/></svg></button></div><div class=social-links><a href=https://github.com/yu-codes target=_blank rel="noopener noreferrer" class=social-link title=GitHub><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
</a><a href=mailto:dylan.jhou1120@gmail.com class=social-link title=Email><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></div></aside><div class=main-content><div class=topbar><div class=breadcrumb><a href=https://yu-codes.github.io/portfolio/>HOME</a>
<span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/articles/>ARTICLES</a>
<span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/articles/others/>Others</a><span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/articles/others/large-language-model/>Large Language Model</a><span class=separator>&#8250;</span>
<span>ä¸€æ–‡æŒæ¡ RAGï¼ˆRetrieval-Augmented Generationï¼‰ï¼šæ¶æ§‹ã€æ‡‰ç”¨èˆ‡å¯¦ä½œè§£æ</span></div></div><main class=content-area><article class=article-content><header class=article-header><h1>ä¸€æ–‡æŒæ¡ RAGï¼ˆRetrieval-Augmented Generationï¼‰ï¼šæ¶æ§‹ã€æ‡‰ç”¨èˆ‡å¯¦ä½œè§£æ</h1><div class=article-meta><span class=article-author><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
Yu-Han Jhou
</span><span class=article-updated><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
Last updated: 2025-01-03</span></div></header><div class=article-body><p>ç•¶æˆ‘å€‘ä½¿ç”¨å¤§å‹èªè¨€æ¨¡å‹ï¼ˆLLMï¼‰æ™‚ï¼Œå¸¸é‡åˆ°çŸ¥è­˜æœ‰é™ã€äº‹å¯¦éŒ¯èª¤èˆ‡å¹»è¦ºï¼ˆhallucinationï¼‰ç­‰å•é¡Œã€‚<strong>RAGï¼ˆRetrieval-Augmented Generationï¼‰</strong> æ­£æ˜¯ç‚ºäº†è§£æ±ºé€™äº›å•é¡Œè€Œå‡ºç¾çš„æŠ€è¡“æ¶æ§‹ã€‚</p><blockquote><p>æœ¬æ–‡å°‡æ·±å…¥è§£æ RAG çš„è¨­è¨ˆç†å¿µã€é‹ä½œæµç¨‹ã€å¯¦ä½œæ–¹å¼èˆ‡å¸¸è¦‹æ‡‰ç”¨ï¼Œä¸¦æ­é… LangChain å¯¦ä¾‹æ¼”ç·´ï¼Œè®“ä½ ä¸å†éœ€è¦æŸ¥æ‰¾å…¶ä»–æ•™å­¸è³‡æºã€‚</p></blockquote><hr><nav class=article-toc><span class=toc-title>Table of Contents</span><nav id=TableOfContents><ul><li><a href=#-ä»€éº¼æ˜¯-rag>ğŸ“š ä»€éº¼æ˜¯ RAGï¼Ÿ</a></li><li><a href=#-æ ¸å¿ƒæµç¨‹rag-çš„å››å€‹éšæ®µ>ğŸ” æ ¸å¿ƒæµç¨‹ï¼šRAG çš„å››å€‹éšæ®µ</a></li><li><a href=#-rag-çš„å„ªå‹¢èˆ‡é™åˆ¶>ğŸ§  RAG çš„å„ªå‹¢èˆ‡é™åˆ¶</a><ul><li><a href=#-å„ªé»>âœ… å„ªé»</a></li><li><a href=#-é™åˆ¶>âš ï¸ é™åˆ¶</a></li></ul></li><li><a href=#-æ¶æ§‹åœ–æ¦‚å¿µ>ğŸ§± æ¶æ§‹åœ–ï¼ˆæ¦‚å¿µï¼‰</a></li><li><a href=#-rag-ç³»çµ±å¯¦ä½œç”¨-langchain--faiss>ğŸ”¨ RAG ç³»çµ±å¯¦ä½œï¼ˆç”¨ LangChain + FAISSï¼‰</a><ul><li><a href=#å®‰è£å¿…è¦å¥—ä»¶>å®‰è£å¿…è¦å¥—ä»¶</a></li><li><a href=#æ­¥é©Ÿä¸€æ–‡ä»¶è®€å–èˆ‡åˆ†æ®µ>æ­¥é©Ÿä¸€ï¼šæ–‡ä»¶è®€å–èˆ‡åˆ†æ®µ</a></li><li><a href=#æ­¥é©ŸäºŒå»ºç«‹å‘é‡ç´¢å¼•ä»¥-faiss-ç‚ºä¾‹>æ­¥é©ŸäºŒï¼šå»ºç«‹å‘é‡ç´¢å¼•ï¼ˆä»¥ FAISS ç‚ºä¾‹ï¼‰</a></li><li><a href=#æ­¥é©Ÿä¸‰çµåˆæª¢ç´¢èˆ‡ç”Ÿæˆ>æ­¥é©Ÿä¸‰ï¼šçµåˆæª¢ç´¢èˆ‡ç”Ÿæˆ</a></li></ul></li><li><a href=#-æ–‡ä»¶åˆ†æ®µç­–ç•¥chunk-size-çš„é¸æ“‡åŸå‰‡>ğŸ“‚ æ–‡ä»¶åˆ†æ®µç­–ç•¥ï¼šchunk size çš„é¸æ“‡åŸå‰‡</a></li><li><a href=#-å¸¸è¦‹å‘é‡è³‡æ–™åº«é¸é …>ğŸ” å¸¸è¦‹å‘é‡è³‡æ–™åº«é¸é …</a></li><li><a href=#-å»¶ä¼¸æ‡‰ç”¨å ´æ™¯>ğŸ§  å»¶ä¼¸æ‡‰ç”¨å ´æ™¯</a></li><li><a href=#-é¢è©¦å¸¸è¦‹å•é¡Œèˆ‡æ‡‰å°å»ºè­°>ğŸ§ª é¢è©¦å¸¸è¦‹å•é¡Œèˆ‡æ‡‰å°å»ºè­°</a></li><li><a href=#-å»¶ä¼¸è³‡æºæ¨è–¦>ğŸ“˜ å»¶ä¼¸è³‡æºæ¨è–¦</a></li><li><a href=#-çµèª>ğŸ§¾ çµèª</a></li></ul></nav></nav><h2 id=-ä»€éº¼æ˜¯-rag>ğŸ“š ä»€éº¼æ˜¯ RAGï¼Ÿ</h2><p><strong>RAGï¼Œå…¨å Retrieval-Augmented Generationï¼Œæ˜¯ä¸€ç¨®å°‡è³‡æ–™æª¢ç´¢ï¼ˆRetrievalï¼‰èˆ‡èªè¨€æ¨¡å‹ç”Ÿæˆï¼ˆGenerationï¼‰çµåˆçš„æ¶æ§‹</strong>ã€‚å®ƒèƒ½å¤ è®“ LLM åœ¨å›ç­”å•é¡Œå‰ï¼Œå…ˆå¾å¤–éƒ¨è³‡æ–™åº«æŸ¥è©¢ç›¸é—œå…§å®¹ï¼Œå†ä»¥æŸ¥å¾—è³‡æ–™ç‚ºåŸºç¤ç”Ÿæˆæ›´æº–ç¢ºçš„å›æ‡‰ã€‚</p><hr><h2 id=-æ ¸å¿ƒæµç¨‹rag-çš„å››å€‹éšæ®µ>ğŸ” æ ¸å¿ƒæµç¨‹ï¼šRAG çš„å››å€‹éšæ®µ</h2><ol><li><strong>ç”¨æˆ¶è¼¸å…¥æŸ¥è©¢</strong></li><li><strong>å‘é‡åŒ–æŸ¥è©¢ï¼Œæœå°‹ç›¸é—œæ–‡ä»¶</strong></li><li><strong>å°‡æ–‡ä»¶èˆ‡åŸå§‹æŸ¥è©¢ä¸€ä½µé¤µå…¥ LLM</strong></li><li><strong>LLM æ ¹æ“šä¸Šä¸‹æ–‡è³‡æ–™ç”Ÿæˆå›ç­”</strong></li></ol><p>é€™å€‹éç¨‹è®“ LLM æ‹¿åˆ°<strong>æœ€æ–°çš„çŸ¥è­˜èˆ‡å°ˆå±¬ä¸Šä¸‹æ–‡</strong>ï¼Œæå‡å›ç­”æ­£ç¢ºæ€§ã€‚</p><hr><h2 id=-rag-çš„å„ªå‹¢èˆ‡é™åˆ¶>ğŸ§  RAG çš„å„ªå‹¢èˆ‡é™åˆ¶</h2><h3 id=-å„ªé»>âœ… å„ªé»</h3><ul><li>é¿å…å¹»è¦ºï¼ˆhallucinationï¼‰</li><li>å¯æ“´å……ä¼æ¥­å…§éƒ¨çŸ¥è­˜</li><li>çŸ¥è­˜åº«å¯å³æ™‚æ›´æ–°ï¼Œç„¡éœ€é‡è¨“æ¨¡å‹</li></ul><h3 id=-é™åˆ¶>âš ï¸ é™åˆ¶</h3><ul><li>æª¢ç´¢å“è³ªå½±éŸ¿ç”Ÿæˆå“è³ª</li><li>è¼ƒé«˜å»¶é²ï¼ˆéœ€æª¢ç´¢ + æ¨ç†ï¼‰</li><li>æ–‡ä»¶åˆ†æ®µç­–ç•¥èˆ‡å‘é‡åŒ–å“è³ªé—œéµ</li></ul><hr><h2 id=-æ¶æ§‹åœ–æ¦‚å¿µ>ğŸ§± æ¶æ§‹åœ–ï¼ˆæ¦‚å¿µï¼‰</h2><pre tabindex=0><code>\[User Query]
â†“
\[Embedding Model] â†’ \[Vector DB] â†’ \[Top-K Documents]
â†“                          â†˜
â†“                        \[Retriever]
â†“                             â†“
\[Prompt Template + Documents] â†’ \[LLM (e.g. GPT-4)]
â†“
\[Generated Answer]
</code></pre><hr><h2 id=-rag-ç³»çµ±å¯¦ä½œç”¨-langchain--faiss>ğŸ”¨ RAG ç³»çµ±å¯¦ä½œï¼ˆç”¨ LangChain + FAISSï¼‰</h2><h3 id=å®‰è£å¿…è¦å¥—ä»¶>å®‰è£å¿…è¦å¥—ä»¶</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install langchain openai faiss-cpu
</span></span></code></pre></div><h3 id=æ­¥é©Ÿä¸€æ–‡ä»¶è®€å–èˆ‡åˆ†æ®µ>æ­¥é©Ÿä¸€ï¼šæ–‡ä»¶è®€å–èˆ‡åˆ†æ®µ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> langchain.document_loaders <span style=color:#f92672>import</span> TextLoader
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> langchain.text_splitter <span style=color:#f92672>import</span> RecursiveCharacterTextSplitter
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>loader <span style=color:#f92672>=</span> TextLoader(<span style=color:#e6db74>&#34;docs/policy.txt&#34;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>)
</span></span><span style=display:flex><span>docs <span style=color:#f92672>=</span> loader<span style=color:#f92672>.</span>load()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>splitter <span style=color:#f92672>=</span> RecursiveCharacterTextSplitter(chunk_size<span style=color:#f92672>=</span><span style=color:#ae81ff>500</span>, chunk_overlap<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>chunks <span style=color:#f92672>=</span> splitter<span style=color:#f92672>.</span>split_documents(docs)
</span></span></code></pre></div><hr><h3 id=æ­¥é©ŸäºŒå»ºç«‹å‘é‡ç´¢å¼•ä»¥-faiss-ç‚ºä¾‹>æ­¥é©ŸäºŒï¼šå»ºç«‹å‘é‡ç´¢å¼•ï¼ˆä»¥ FAISS ç‚ºä¾‹ï¼‰</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> langchain.embeddings <span style=color:#f92672>import</span> OpenAIEmbeddings
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> langchain.vectorstores <span style=color:#f92672>import</span> FAISS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>embeddings <span style=color:#f92672>=</span> OpenAIEmbeddings()
</span></span><span style=display:flex><span>vectorstore <span style=color:#f92672>=</span> FAISS<span style=color:#f92672>.</span>from_documents(chunks, embeddings)
</span></span><span style=display:flex><span>retriever <span style=color:#f92672>=</span> vectorstore<span style=color:#f92672>.</span>as_retriever()
</span></span></code></pre></div><hr><h3 id=æ­¥é©Ÿä¸‰çµåˆæª¢ç´¢èˆ‡ç”Ÿæˆ>æ­¥é©Ÿä¸‰ï¼šçµåˆæª¢ç´¢èˆ‡ç”Ÿæˆ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> langchain.chat_models <span style=color:#f92672>import</span> ChatOpenAI
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> langchain.chains <span style=color:#f92672>import</span> RetrievalQA
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>llm <span style=color:#f92672>=</span> ChatOpenAI(temperature<span style=color:#f92672>=</span><span style=color:#ae81ff>0.2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>rag_chain <span style=color:#f92672>=</span> RetrievalQA<span style=color:#f92672>.</span>from_chain_type(
</span></span><span style=display:flex><span>    llm<span style=color:#f92672>=</span>llm,
</span></span><span style=display:flex><span>    retriever<span style=color:#f92672>=</span>retriever,
</span></span><span style=display:flex><span>    chain_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stuff&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>response <span style=color:#f92672>=</span> rag_chain<span style=color:#f92672>.</span>run(<span style=color:#e6db74>&#34;è©²æ”¿ç­–ä¸­æœ‰æåˆ°è³‡æ–™åˆªé™¤çš„æ¢æ¬¾å—ï¼Ÿ&#34;</span>)
</span></span><span style=display:flex><span>print(response)
</span></span></code></pre></div><hr><h2 id=-æ–‡ä»¶åˆ†æ®µç­–ç•¥chunk-size-çš„é¸æ“‡åŸå‰‡>ğŸ“‚ æ–‡ä»¶åˆ†æ®µç­–ç•¥ï¼šchunk size çš„é¸æ“‡åŸå‰‡</h2><table><thead><tr><th>chunk_size</th><th>chunk_overlap</th><th>é©ç”¨å ´æ™¯</th></tr></thead><tbody><tr><td>200~500</td><td>50~100</td><td>ä¸€èˆ¬æ–‡å­—è³‡æ–™</td></tr><tr><td>800+</td><td>150~200</td><td>æŠ€è¡“æ–‡ä»¶ / æ³•å¾‹åˆç´„</td></tr><tr><td>éå°</td><td>å¤ªç¢ï¼Œä¸å…·èªæ„</td><td></td></tr><tr><td>éå¤§</td><td>åƒ…éƒ¨åˆ†è¢«æª¢ç´¢ï¼Œä¸å®Œæ•´</td><td></td></tr></tbody></table><hr><h2 id=-å¸¸è¦‹å‘é‡è³‡æ–™åº«é¸é …>ğŸ” å¸¸è¦‹å‘é‡è³‡æ–™åº«é¸é …</h2><table><thead><tr><th>åç¨±</th><th>ç‰¹æ€§</th></tr></thead><tbody><tr><td>FAISS</td><td>è¼•é‡ï¼Œé–‹æºï¼Œé©åˆæœ¬æ©Ÿå¯¦é©—</td></tr><tr><td>Chroma</td><td>ç°¡å–®å¥½ç”¨ï¼ŒåŸç”Ÿæ”¯æ´ LangChain</td></tr><tr><td>Weaviate</td><td>é›²ç«¯æ”¯æ´å¼·ï¼Œæ”¯æ´ GraphQL</td></tr><tr><td>Pinecone</td><td>é›²ç«¯æœå‹™ç©©å®šï¼Œå½ˆæ€§ä½³</td></tr></tbody></table><hr><h2 id=-å»¶ä¼¸æ‡‰ç”¨å ´æ™¯>ğŸ§  å»¶ä¼¸æ‡‰ç”¨å ´æ™¯</h2><table><thead><tr><th>æ‡‰ç”¨é¡å‹</th><th>èªªæ˜</th></tr></thead><tbody><tr><td>ChatPDF</td><td>ä½¿ç”¨è€…å¯èˆ‡ PDF æ–‡ä»¶å°è©±</td></tr><tr><td>æ³•è¦åŠ©æ‰‹</td><td>è¼¸å…¥å•é¡Œï¼Œè‡ªæ³•å¾‹æ–‡ä»¶ä¸­æ‰¾å‡ºæ¢æ¬¾ä¸¦è§£é‡‹</td></tr><tr><td>FAQ å•ç­”ç³»çµ±</td><td>åŸºæ–¼çŸ¥è­˜åº«å»ºç«‹è‡ªå‹•å®¢æœ</td></tr><tr><td>æŠ€è¡“æ”¯æ´åŠ©æ‰‹</td><td>å¾å…§éƒ¨æ–‡ä»¶å›ç­”å·¥ç¨‹å•é¡Œ</td></tr></tbody></table><hr><h2 id=-é¢è©¦å¸¸è¦‹å•é¡Œèˆ‡æ‡‰å°å»ºè­°>ğŸ§ª é¢è©¦å¸¸è¦‹å•é¡Œèˆ‡æ‡‰å°å»ºè­°</h2><ol><li><p><strong>RAG èˆ‡ Fine-tuning æœ‰ä½•å·®ç•°ï¼Ÿ</strong></p><blockquote><p>Fine-tuning æ˜¯è¨“ç·´æ¨¡å‹å¸æ”¶è³‡æ–™ï¼›RAG æ˜¯æŸ¥è³‡æ–™å¾Œç”Ÿæˆï¼Œä¸éœ€é‡è¨“ã€å¯å³æ™‚æ›´æ–°ã€‚</p></blockquote></li><li><p><strong>å‘é‡æª¢ç´¢å¦‚ä½•å½±éŸ¿å›ç­”å“è³ªï¼Ÿ</strong></p><blockquote><p>è‹¥æª¢ç´¢æ–‡ä»¶ç„¡é—œï¼Œç”Ÿæˆå…§å®¹å°±ä¸æº–ç¢ºï¼›æª¢ç´¢æº–ç¢ºç‡èˆ‡å¬å›ç‡æ˜¯é—œéµç“¶é ¸ã€‚</p></blockquote></li><li><p><strong>å¦‚ä½•å„ªåŒ– RAG å›ç­”æ•ˆæœï¼Ÿ</strong></p><blockquote><ul><li>ç²¾ç…‰åˆ†æ®µèˆ‡ Embedding</li><li>ä½¿ç”¨ reranker æ’åºçµæœ</li><li>ä½¿ç”¨ Prompt Template å¼•å°å›ç­”é¢¨æ ¼èˆ‡æ ¼å¼</li></ul></blockquote></li><li><p><strong>ä½ æœƒå¦‚ä½•éƒ¨ç½²ä¸€å€‹å¯ç”¨çš„ RAG ç³»çµ±ï¼Ÿ</strong></p><blockquote><p>å»ºè­°ç”¨ LangChain + FastAPI æ­é…å‘é‡è³‡æ–™åº«ï¼Œå‰ç«¯å¯ç”¨ Streamlit/Gradio å±•ç¤ºã€‚</p></blockquote></li></ol><hr><h2 id=-å»¶ä¼¸è³‡æºæ¨è–¦>ğŸ“˜ å»¶ä¼¸è³‡æºæ¨è–¦</h2><ul><li><a href=https://docs.langchain.com/docs/use-cases/question-answering/>LangChain RAG Tutorial</a></li><li><a href=https://platform.openai.com/docs/guides/embeddings>OpenAI Embedding Docs</a></li><li><a href=https://docs.trychroma.com/>ChromaDB</a></li><li><a href=https://github.com/facebookresearch/faiss>FAISS GitHub</a></li></ul><hr><h2 id=-çµèª>ğŸ§¾ çµèª</h2><p>RAG æ¶æ§‹åœ¨ç•¶ä»£ AI æ‡‰ç”¨ä¸­æ‰®æ¼”äº†é€£çµèªè¨€æ¨¡å‹èˆ‡çœŸå¯¦çŸ¥è­˜çš„æ©‹æ¨‘ï¼Œç‰¹åˆ¥é©åˆçŸ¥è­˜å•ç­”ã€æ–‡ä»¶ç†è§£èˆ‡ä¼æ¥­å…§éƒ¨åŠ©æ‰‹çš„æ§‹å»ºã€‚æŒæ¡ RAG å°±æŒæ¡äº†æ‰“é€ å¯ä¿¡ä»» LLM ç³»çµ±çš„é—œéµèƒ½åŠ›ã€‚</p></div><div class=article-tags><div class=tags><span class=tag>RAG</span></div></div><footer class=article-footer><a href=/portfolio/articles/others/large-language-model/ class=back-link>â† Back to Large Language Model</a></footer></article></main><footer class=site-footer><p>&copy; 2026 YuHan Jhou. All rights reserved.</p></footer></div></div><script src=https://yu-codes.github.io/portfolio/js/theme.js defer></script><script src=https://yu-codes.github.io/portfolio/js/roadmap.js defer></script><script src=https://yu-codes.github.io/portfolio/js/parallax.js defer></script><script src=https://yu-codes.github.io/portfolio/js/page-transition.js defer></script></body></html>