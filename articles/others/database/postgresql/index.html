<!doctype html><html lang=en class=html><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>PostgreSQL 深入指南：從入門到面試實戰 - Yu's Portfolio & Learning Hub</title><meta name=description content="PostgreSQL 是一套功能完整、穩定且開源的關聯式資料庫管理系統（RDBMS），廣泛應用於各種企業級應用。它不僅支援標準 SQL，還具備強大的擴展性、資料一致性與先進功能，如 JSON 處理、Window Functions、全文搜尋、GIS 等。
本篇文章將從 PostgreSQL 的架構與特性講起，帶你快速掌握實作技巧、資料庫管理指令，並涵蓋面試中常被提問的進階知識。
🔧 什麼是 PostgreSQL？ PostgreSQL 是一套 ACID 保證 的開源資料庫，支援複雜查詢、事務處理、多版本並發控制（MVCC）與資料一致性機制。
開發語言：C 開源協議：PostgreSQL License 支援平台：Linux、macOS、Windows 適合場景：企業應用、金融系統、地理資訊（GIS）、資料科學 📦 PostgreSQL 的核心特色 功能 說明 MVCC 支援高併發不鎖表，避免讀寫阻塞 JSON / JSONB 支援 可做為半結構化 NoSQL 使用 CTE / Window Functions 複雜查詢與分析支援 Extensibility 支援自定義資料型別、函式與操作符 Full Text Search 內建全文搜尋引擎 GIS（PostGIS）擴充 適合地理座標查詢與空間分析 🚀 安裝 PostgreSQL（以 macOS 為例） brew install postgresql brew services start postgresql psql postgres 或使用 Docker：
docker run --name pg -e POSTGRES_PASSWORD=pass -p 5432:5432 -d postgres 🧑‍💻 基本語法與實作 建立資料庫與使用者 CREATE DATABASE company; CREATE USER analyst WITH PASSWORD 'strongpass'; GRANT ALL PRIVILEGES ON DATABASE company TO analyst; 建立資料表與插入資料 CREATE TABLE employees ( id SERIAL PRIMARY KEY, name TEXT NOT NULL, department TEXT, salary NUMERIC CHECK (salary >= 0) ); INSERT INTO employees (name, department, salary) VALUES ('Alice', 'Engineering', 90000); 查詢資料 SELECT name, salary FROM employees WHERE salary > 80000; 🧱 JSON 與半結構化資料查詢 CREATE TABLE logs ( id SERIAL PRIMARY KEY, payload JSONB ); -- 查詢含有某欄位的紀錄 SELECT * FROM logs WHERE payload ? 'user'; -- 查詢嵌套值 SELECT payload->>'user' AS username FROM logs; 📊 分析查詢與性能優化 EXPLAIN 與 ANALYZE EXPLAIN ANALYZE SELECT * FROM employees WHERE salary > 100000; Seq Scan 表示掃描整張表 Index Scan 表示使用索引 可依結果判斷是否需要建 index ⚙️ Index 與效能實務 CREATE INDEX idx_salary ON employees(salary); -- 多欄索引 CREATE INDEX idx_dept_salary ON employees(department, salary); 面試常問：
"><meta property="og:title" content="PostgreSQL 深入指南：從入門到面試實戰"><meta property="og:description" content="PostgreSQL 是一套功能完整、穩定且開源的關聯式資料庫管理系統（RDBMS），廣泛應用於各種企業級應用。它不僅支援標準 SQL，還具備強大的擴展性、資料一致性與先進功能，如 JSON 處理、Window Functions、全文搜尋、GIS 等。
本篇文章將從 PostgreSQL 的架構與特性講起，帶你快速掌握實作技巧、資料庫管理指令，並涵蓋面試中常被提問的進階知識。
🔧 什麼是 PostgreSQL？ PostgreSQL 是一套 ACID 保證 的開源資料庫，支援複雜查詢、事務處理、多版本並發控制（MVCC）與資料一致性機制。
開發語言：C 開源協議：PostgreSQL License 支援平台：Linux、macOS、Windows 適合場景：企業應用、金融系統、地理資訊（GIS）、資料科學 📦 PostgreSQL 的核心特色 功能 說明 MVCC 支援高併發不鎖表，避免讀寫阻塞 JSON / JSONB 支援 可做為半結構化 NoSQL 使用 CTE / Window Functions 複雜查詢與分析支援 Extensibility 支援自定義資料型別、函式與操作符 Full Text Search 內建全文搜尋引擎 GIS（PostGIS）擴充 適合地理座標查詢與空間分析 🚀 安裝 PostgreSQL（以 macOS 為例） brew install postgresql brew services start postgresql psql postgres 或使用 Docker：
docker run --name pg -e POSTGRES_PASSWORD=pass -p 5432:5432 -d postgres 🧑‍💻 基本語法與實作 建立資料庫與使用者 CREATE DATABASE company; CREATE USER analyst WITH PASSWORD 'strongpass'; GRANT ALL PRIVILEGES ON DATABASE company TO analyst; 建立資料表與插入資料 CREATE TABLE employees ( id SERIAL PRIMARY KEY, name TEXT NOT NULL, department TEXT, salary NUMERIC CHECK (salary >= 0) ); INSERT INTO employees (name, department, salary) VALUES ('Alice', 'Engineering', 90000); 查詢資料 SELECT name, salary FROM employees WHERE salary > 80000; 🧱 JSON 與半結構化資料查詢 CREATE TABLE logs ( id SERIAL PRIMARY KEY, payload JSONB ); -- 查詢含有某欄位的紀錄 SELECT * FROM logs WHERE payload ? 'user'; -- 查詢嵌套值 SELECT payload->>'user' AS username FROM logs; 📊 分析查詢與性能優化 EXPLAIN 與 ANALYZE EXPLAIN ANALYZE SELECT * FROM employees WHERE salary > 100000; Seq Scan 表示掃描整張表 Index Scan 表示使用索引 可依結果判斷是否需要建 index ⚙️ Index 與效能實務 CREATE INDEX idx_salary ON employees(salary); -- 多欄索引 CREATE INDEX idx_dept_salary ON employees(department, salary); 面試常問：
"><meta property="og:url" content="https://yu-codes.github.io/portfolio/articles/others/database/postgresql/"><link rel=canonical href=https://yu-codes.github.io/portfolio/articles/others/database/postgresql/><link rel=stylesheet href=https://yu-codes.github.io/portfolio/css/main.css></head><body class=body><div class=container><aside class=sidebar><div class=sidebar-header><h1 class=name>Yu</h1><p class=tagline>Developer, dreamer, debugger.</p></div><nav class=sidebar-nav><a href=https://yu-codes.github.io/portfolio/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
<span>HOME</span>
</a><a href=https://yu-codes.github.io/portfolio/articles/ class="nav-item active"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5.0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5.0 014 19.5v-15A2.5 2.5.0 016.5 2z"/></svg>
<span>ARTICLES</span>
</a><a href=https://yu-codes.github.io/portfolio/resume/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="11" x2="12" y2="17"/><line x1="9" y1="14" x2="15" y2="14"/></svg>
<span>RESUME</span>
</a><a href=https://yu-codes.github.io/portfolio/projects/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="8" height="8"/><rect x="13" y="3" width="8" height="8"/><rect x="3" y="13" width="8" height="8"/><rect x="13" y="13" width="8" height="8"/></svg>
<span>PROJECTS</span>
</a><a href=https://yu-codes.github.io/portfolio/archives/ class=nav-item><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span>ARCHIVES</span></a></nav><div class=sidebar-footer><div class=controls><button class="control-btn theme-toggle" title="Toggle theme (light/dark)" aria-label="Toggle theme">
<svg class="icon-sun" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M12 3a9 9 0 010 18" fill="currentColor" opacity=".9"/><path d="M12 3a9 9 0 000 18" fill="currentColor" opacity=".25"/></svg>
<svg class="icon-moon" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M12 3a9 9 0 000 18" fill="currentColor" opacity=".9"/><path d="M12 3a9 9 0 010 18" fill="currentColor" opacity=".25"/></svg>
</button>
<button class="control-btn lang-toggle" title="Toggle language" aria-label="Toggle language">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3.0 014 10 15.3 15.3.0 01-4 10A15.3 15.3.0 018 12a15.3 15.3.0 014-10z"/></svg></button></div><div class=social-links><a href=https://github.com/yu-codes target=_blank rel="noopener noreferrer" class=social-link title=GitHub><svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
</a><a href=mailto:dylan.jhou1120@gmail.com class=social-link title=Email><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></div></aside><div class=main-content><div class=topbar><div class=breadcrumb><a href=https://yu-codes.github.io/portfolio/>HOME</a>
<span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/articles/>ARTICLES</a>
<span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/articles/others/>Others</a><span class=separator>&#8250;</span>
<a href=https://yu-codes.github.io/portfolio/articles/others/database/>Database</a><span class=separator>&#8250;</span>
<span>PostgreSQL 深入指南：從入門到面試實戰</span></div></div><main class=content-area><article class=article-content><header class=article-header><h1>PostgreSQL 深入指南：從入門到面試實戰</h1><div class=article-meta><span class=article-author><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
Yu-Han Jhou
</span><span class=article-updated><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
Last updated: 2024-10-31</span></div></header><div class=article-body><p>PostgreSQL 是一套功能完整、穩定且開源的關聯式資料庫管理系統（RDBMS），廣泛應用於各種企業級應用。它不僅支援標準 SQL，還具備強大的擴展性、資料一致性與先進功能，如 JSON 處理、Window Functions、全文搜尋、GIS 等。</p><p>本篇文章將從 PostgreSQL 的架構與特性講起，帶你快速掌握實作技巧、資料庫管理指令，並涵蓋面試中常被提問的進階知識。</p><hr><nav class=article-toc><span class=toc-title>Table of Contents</span><nav id=TableOfContents><ul><li><a href=#-什麼是-postgresql>🔧 什麼是 PostgreSQL？</a></li><li><a href=#-postgresql-的核心特色>📦 PostgreSQL 的核心特色</a></li><li><a href=#-安裝-postgresql以-macos-為例>🚀 安裝 PostgreSQL（以 macOS 為例）</a></li><li><a href=#-基本語法與實作>🧑‍💻 基本語法與實作</a><ul><li><a href=#建立資料庫與使用者>建立資料庫與使用者</a></li><li><a href=#建立資料表與插入資料>建立資料表與插入資料</a></li><li><a href=#查詢資料>查詢資料</a></li></ul></li><li><a href=#-json-與半結構化資料查詢>🧱 JSON 與半結構化資料查詢</a></li><li><a href=#-分析查詢與性能優化>📊 分析查詢與性能優化</a><ul><li><a href=#explain-與-analyze>EXPLAIN 與 ANALYZE</a></li></ul></li><li><a href=#-index-與效能實務>⚙️ Index 與效能實務</a></li><li><a href=#-postgresql-面試問題精選附解說>🧠 PostgreSQL 面試問題精選（附解說）</a><ul><li><a href=#1-postgresql-是如何實作-mvcc-的>1. PostgreSQL 是如何實作 MVCC 的？</a></li><li><a href=#2-你如何解釋-postgresql-事務隔離等級>2. 你如何解釋 &ldquo;PostgreSQL 事務隔離等級&rdquo;？</a></li><li><a href=#3-如何備份與還原資料庫>3. 如何備份與還原資料庫？</a></li><li><a href=#4-postgresql-如何處理索引膨脹index-bloat>4. PostgreSQL 如何處理索引膨脹（index bloat）？</a></li></ul></li><li><a href=#-權限與角色管理>🔒 權限與角色管理</a></li><li><a href=#-延伸功能ctewindow-functions全文搜尋>🔍 延伸功能：CTE、Window Functions、全文搜尋</a><ul><li><a href=#ctecommon-table-expression>CTE（Common Table Expression）</a></li><li><a href=#window-function>Window Function</a></li><li><a href=#full-text-search>Full-Text Search</a></li></ul></li><li><a href=#-postgresql-vs-其他主流資料庫比較>🆚 PostgreSQL vs 其他主流資料庫比較</a><ul><li><a href=#-實務建議>✍️ 實務建議</a></li><li><a href=#-面試常見延伸問題>💬 面試常見延伸問題</a></li></ul></li><li><a href=#-推薦資源>📚 推薦資源</a></li><li><a href=#結語>結語</a></li></ul></nav></nav><h2 id=-什麼是-postgresql>🔧 什麼是 PostgreSQL？</h2><blockquote><p>PostgreSQL 是一套 <strong>ACID 保證</strong> 的開源資料庫，支援複雜查詢、事務處理、多版本並發控制（MVCC）與資料一致性機制。</p></blockquote><ul><li>開發語言：C</li><li>開源協議：PostgreSQL License</li><li>支援平台：Linux、macOS、Windows</li><li>適合場景：企業應用、金融系統、地理資訊（GIS）、資料科學</li></ul><hr><h2 id=-postgresql-的核心特色>📦 PostgreSQL 的核心特色</h2><table><thead><tr><th>功能</th><th>說明</th></tr></thead><tbody><tr><td>MVCC</td><td>支援高併發不鎖表，避免讀寫阻塞</td></tr><tr><td>JSON / JSONB 支援</td><td>可做為半結構化 NoSQL 使用</td></tr><tr><td>CTE / Window Functions</td><td>複雜查詢與分析支援</td></tr><tr><td>Extensibility</td><td>支援自定義資料型別、函式與操作符</td></tr><tr><td>Full Text Search</td><td>內建全文搜尋引擎</td></tr><tr><td>GIS（PostGIS）擴充</td><td>適合地理座標查詢與空間分析</td></tr></tbody></table><hr><h2 id=-安裝-postgresql以-macos-為例>🚀 安裝 PostgreSQL（以 macOS 為例）</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install postgresql
</span></span><span style=display:flex><span>brew services start postgresql
</span></span><span style=display:flex><span>psql postgres
</span></span></code></pre></div><p>或使用 Docker：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run --name pg -e POSTGRES_PASSWORD<span style=color:#f92672>=</span>pass -p 5432:5432 -d postgres
</span></span></code></pre></div><hr><h2 id=-基本語法與實作>🧑‍💻 基本語法與實作</h2><h3 id=建立資料庫與使用者>建立資料庫與使用者</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> company;
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> analyst <span style=color:#66d9ef>WITH</span> PASSWORD <span style=color:#e6db74>&#39;strongpass&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DATABASE</span> company <span style=color:#66d9ef>TO</span> analyst;
</span></span></code></pre></div><h3 id=建立資料表與插入資料>建立資料表與插入資料</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> employees (
</span></span><span style=display:flex><span>  id SERIAL <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>  name TEXT <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
</span></span><span style=display:flex><span>  department TEXT,
</span></span><span style=display:flex><span>  salary NUMERIC <span style=color:#66d9ef>CHECK</span> (salary <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> employees (name, department, salary)
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (<span style=color:#e6db74>&#39;Alice&#39;</span>, <span style=color:#e6db74>&#39;Engineering&#39;</span>, <span style=color:#ae81ff>90000</span>);
</span></span></code></pre></div><h3 id=查詢資料>查詢資料</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> name, salary <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> salary <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>80000</span>;
</span></span></code></pre></div><hr><h2 id=-json-與半結構化資料查詢>🧱 JSON 與半結構化資料查詢</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> logs (
</span></span><span style=display:flex><span>  id SERIAL <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
</span></span><span style=display:flex><span>  payload JSONB
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 查詢含有某欄位的紀錄
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> logs <span style=color:#66d9ef>WHERE</span> payload <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;user&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 查詢嵌套值
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> payload<span style=color:#f92672>-&gt;&gt;</span><span style=color:#e6db74>&#39;user&#39;</span> <span style=color:#66d9ef>AS</span> username <span style=color:#66d9ef>FROM</span> logs;
</span></span></code></pre></div><hr><h2 id=-分析查詢與性能優化>📊 分析查詢與性能優化</h2><h3 id=explain-與-analyze>EXPLAIN 與 ANALYZE</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>EXPLAIN</span> <span style=color:#66d9ef>ANALYZE</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> salary <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>100000</span>;
</span></span></code></pre></div><ul><li><code>Seq Scan</code> 表示掃描整張表</li><li><code>Index Scan</code> 表示使用索引</li><li>可依結果判斷是否需要建 index</li></ul><hr><h2 id=-index-與效能實務>⚙️ Index 與效能實務</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>INDEX</span> idx_salary <span style=color:#66d9ef>ON</span> employees(salary);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>-- 多欄索引
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>INDEX</span> idx_dept_salary <span style=color:#66d9ef>ON</span> employees(department, salary);
</span></span></code></pre></div><p><strong>面試常問：</strong></p><ul><li>索引對 <code>LIKE '%abc'</code> 無效，為什麼？</li><li>多欄索引建立順序對查詢是否有影響？</li></ul><hr><h2 id=-postgresql-面試問題精選附解說>🧠 PostgreSQL 面試問題精選（附解說）</h2><h3 id=1-postgresql-是如何實作-mvcc-的>1. PostgreSQL 是如何實作 MVCC 的？</h3><blockquote><p>PostgreSQL 透過 <strong>tuple versioning</strong> 機制（每筆資料有 xmin/xmax 欄位），實現多版本共存。舊版本不會立即被覆蓋，而是由 <code>VACUUM</code> 回收。</p></blockquote><h3 id=2-你如何解釋-postgresql-事務隔離等級>2. 你如何解釋 &ldquo;PostgreSQL 事務隔離等級&rdquo;？</h3><ul><li>READ COMMITTED（預設）</li><li>REPEATABLE READ</li><li>SERIALIZABLE</li></ul><blockquote><p>PostgreSQL 的事務隔離等級由 <code>SET TRANSACTION ISOLATION LEVEL</code> 控制，支援標準 SQL 四級隔離模型。</p></blockquote><h3 id=3-如何備份與還原資料庫>3. 如何備份與還原資料庫？</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pg_dump company &gt; backup.sql
</span></span><span style=display:flex><span>psql -U postgres -d company &lt; backup.sql
</span></span></code></pre></div><h3 id=4-postgresql-如何處理索引膨脹index-bloat>4. PostgreSQL 如何處理索引膨脹（index bloat）？</h3><blockquote><p>定期使用 <code>REINDEX</code> 或 <code>VACUUM FULL</code> 清理碎片。</p></blockquote><hr><h2 id=-權限與角色管理>🔒 權限與角色管理</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>ROLE</span> readonly;
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>CONNECT</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DATABASE</span> company <span style=color:#66d9ef>TO</span> readonly;
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>USAGE</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>SCHEMA</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>TO</span> readonly;
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>ALL</span> TABLES <span style=color:#66d9ef>IN</span> <span style=color:#66d9ef>SCHEMA</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>TO</span> readonly;
</span></span></code></pre></div><hr><h2 id=-延伸功能ctewindow-functions全文搜尋>🔍 延伸功能：CTE、Window Functions、全文搜尋</h2><h3 id=ctecommon-table-expression>CTE（Common Table Expression）</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>WITH</span> high_salary <span style=color:#66d9ef>AS</span> (
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> salary <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>100000</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> department, <span style=color:#66d9ef>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>FROM</span> high_salary <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> department;
</span></span></code></pre></div><h3 id=window-function>Window Function</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> name, department, salary,
</span></span><span style=display:flex><span>  RANK() OVER (PARTITION <span style=color:#66d9ef>BY</span> department <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> salary <span style=color:#66d9ef>DESC</span>) <span style=color:#66d9ef>AS</span> dept_rank
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> employees;
</span></span></code></pre></div><h3 id=full-text-search>Full-Text Search</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> articles
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> to_tsvector(<span style=color:#e6db74>&#39;english&#39;</span>, content) <span style=color:#f92672>@@</span> to_tsquery(<span style=color:#e6db74>&#39;data &amp; science&#39;</span>);
</span></span></code></pre></div><hr><h2 id=-postgresql-vs-其他主流資料庫比較>🆚 PostgreSQL vs 其他主流資料庫比較</h2><p>在選擇資料庫時，了解不同系統的設計理念、功能強項與使用場景至關重要。以下針對 PostgreSQL、MySQL、MongoDB 做出實務面比較：</p><table><thead><tr><th>特性 / 系統</th><th><strong>PostgreSQL</strong></th><th><strong>MySQL</strong></th><th><strong>MongoDB</strong></th></tr></thead><tbody><tr><td>資料模型</td><td>關聯式（支援 JSON/NoSQL 功能）</td><td>關聯式</td><td>文件導向（BSON 格式）</td></tr><tr><td>ACID 支援</td><td>✅ 完整支援（預設強一致性）</td><td>✅ 也支援，但預設隔離等級較低（REPEATABLE READ）</td><td>🚫 預設為最終一致性，可調整為強一致</td></tr><tr><td>JSON/半結構化支援</td><td>✅ 強大（JSONB 有索引與運算支援）</td><td>⚠️ 支援 JSON 欄位但查詢能力較弱</td><td>✅ 原生設計，為主要資料格式</td></tr><tr><td>索引能力</td><td>✅ 全面（B-Tree、GIN、GiST、BRIN、Partial Index）</td><td>✅ 常見索引如 B-Tree、全文搜尋</td><td>✅ 原生索引支援（複合欄位、Array Index）</td></tr><tr><td>查詢語言</td><td>標準 SQL + 擴展語法</td><td>標準 SQL</td><td>Mongo Query Language（與 SQL 概念不同）</td></tr><tr><td>擴充性 / 自定義</td><td>✅ 強（支援自定義型別、函式、操作符）</td><td>⚠️ 有限</td><td>⚠️ 擴展性弱於 PostgreSQL</td></tr><tr><td>交易處理</td><td>✅ 強（支援多表與 SAVEPOINT）</td><td>✅ 可用，但 XA Transaction 較複雜</td><td>⚠️ 內建交易支援自 4.0 版起開始提供（單集合交易）</td></tr><tr><td>使用場景</td><td>金融系統、地理資訊、分析查詢</td><td>網站後端、CMS、小型應用</td><td>快速開發、原型設計、大量非結構化資料</td></tr><tr><td>社群與支援</td><td>強（開源社群活躍 + 企業採用廣泛）</td><td>非常大（歷史悠久、網路資源豐富）</td><td>活躍，但仍以 NoSQL 社群為主</td></tr></tbody></table><h3 id=-實務建議>✍️ 實務建議</h3><ul><li>若你需要 <strong>關聯資料一致性 + JSON 處理能力</strong>，<strong>PostgreSQL 是最強選擇</strong>。</li><li>若專案開發人力有限、偏向網站類 CRUD 應用，可考慮使用 <strong>MySQL/MariaDB</strong>。</li><li>若資料結構變動大、原型開發頻繁，<strong>MongoDB</strong> 提供最彈性文件存儲模式。</li></ul><hr><h3 id=-面試常見延伸問題>💬 面試常見延伸問題</h3><ol><li><p><strong>你為什麼選 PostgreSQL 而不是 MySQL？</strong></p><blockquote><p>PostgreSQL 支援更完整的 SQL 標準，支援 JSONB 與多種索引結構，對於需要混合結構化與半結構化資料的系統更為適合。</p></blockquote></li><li><p><strong>MongoDB 與 PostgreSQL 哪個適合做全文搜尋？</strong></p><blockquote><p>MongoDB 內建全文搜尋語法簡單，但 PostgreSQL 的 <code>tsvector</code> 加上 <code>GIN Index</code> 提供更靈活的搜尋語法與效率微調能力，且可和 SQL 聚合結合使用。</p></blockquote></li><li><p><strong>MySQL 的主從同步與 PostgreSQL 有何不同？</strong></p><blockquote><p>PostgreSQL 支援 streaming replication，且自 10 版起支援 logical replication（可做行級複製），在彈性與一致性控制上更進一步。</p></blockquote></li></ol><hr><h2 id=-推薦資源>📚 推薦資源</h2><ul><li><a href=https://www.postgresql.org/docs/>PostgreSQL 官方文件</a></li><li>書籍：《PostgreSQL: Up and Running》、《Mastering PostgreSQL in Application Development》</li><li>練習平台：LeetCode SQL、DB Fiddle、pgExercises</li></ul><hr><h2 id=結語>結語</h2><p>PostgreSQL 是目前最被企業與開源社群信賴的資料庫系統之一。具備高併發、彈性擴展與功能深度，不僅適合開發與部署，更是面試中經常被考察的主題。本文涵蓋的內容將幫助你在實作與面談時都能應對如流。</p></div><div class=article-tags><div class=tags><span class=tag>PostgreSQL</span></div></div><footer class=article-footer><a href=/portfolio/articles/others/database/ class=back-link>← Back to Database</a></footer></article></main><footer class=site-footer><p>&copy; 2026 YuHan Jhou. All rights reserved.</p></footer></div></div><script src=https://yu-codes.github.io/portfolio/js/theme.js defer></script><script src=https://yu-codes.github.io/portfolio/js/roadmap.js defer></script><script src=https://yu-codes.github.io/portfolio/js/parallax.js defer></script><script src=https://yu-codes.github.io/portfolio/js/page-transition.js defer></script></body></html>